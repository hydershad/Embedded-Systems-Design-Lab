//calibration.c
//Hyder Shad
//Lab9
//EE445L TTH 12:30pm-2pm Lab section
//11/16/1028

#include <stdint.h>

//data tables for adc lookup based on xcel spreadsheet output

uint16_t const ADCdata[53]={0,602,620,639,657,676,694,713,732,751,770,						
     790,809,829,849,868,889,909,929,949,970,						
     991,1012,1033,1054,1075,1097,1118,1140,1162,1184,						
     1206,1228,1251,1274,1296,1319,1343,1366,1389,1413,						
     1437,1461,1485,1509,1534,1558,1583,1608,1633,1659,1684,4096};						


uint16_t const Tdata[53]={3500,3500,3460,3420,3380,3340,3300,3260,3220,3180,3140,		
     3100,3060,3020,2980,2940,2900,2860,2820,2780,2740,		
     2700,2660,2620,2580,2540,2500,2460,2420,2380,2340,		
     2300,2260,2220,2180,2140,2100,2060,2020,1980,1940,		
     1900,1860,1820,1780,1740,1700,1660,1620,1580,1540,1500,1500};		

		 
uint16_t const Rdata[53]={8032,8032,8080,8128,8176,8225,8274,8324,8374,8425,8476,								
     8527,8579,8632,8685,8738,8792,8846,8901,8956,9012,								
     9068,9125,9182,9240,9298,9357,9416,9476,9536,9597,								
     9659,9721,9783,9847,9910,9975,10040,10105,10172,10238,								
     10306,10374,10443,10512,10582,10653,10724,10796,10869,10942,11016,11016};														
							
		 
int realTemp(int ADC_Sample){		//coverts adc thermistor circuit values to real valued temperature
	
	int i = 0;
	for(i=0; i < 53; i++){
		if(ADCdata[i] > ADC_Sample){
			break;
		}
	}
	i = i - 1;

	return Tdata[i]+ 480;			//add offset of 480
}



